<!DOCTYPE html>
<!-- saved from url=(0059)https://sachinkasaraddi.com/posts/bloc-patter-using-stream/ -->
<html lang="en" dir="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="x-ua-compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="robots" content="index, follow"><title>Flutter: BLoC pattern using Stream | Sachin Kasaraddi</title><meta name="keywords" content="Flutter,BLoC,Dart Streams"><meta name="description" content="This article will help you to understand BLoC pattern in Flutter using stream controller.
TL;DR: Recently, I started #100daysofCode challenge to learn flutter. Since Flutter 2.0 which is native performant, faster development and gone beyond mobile specific to web, desktop and embedded as well. So why not learn flutter?
As part of learning i was able to build crypto currencies app. Though i was happy building this app 😃 , but wasn’t satisfied with the way i wrote the app."><meta name="author" content="Sachin Kasaraddi"><link rel="canonical" href="https://sachinkasaraddi.com/posts/bloc-patter-using-stream/"><link crossorigin="anonymous" href="https://sachinkasaraddi.com/assets/css/stylesheet.min.84cc6e7cd97516a4d4e877c6bebe5a4529afdf61f4d009e2c8bbec3a876fff4e.css" integrity="sha256-hMxufNl1FqTU6HfGvr5aRSmv32H00AniyLvsOodv/04=" rel="preload stylesheet" as="style"><script async="" src="./Flutter_ BLoC pattern using Stream _ Sachin Kasaraddi_files/analytics.js.téléchargement"></script><script defer="" crossorigin="anonymous" src="./Flutter_ BLoC pattern using Stream _ Sachin Kasaraddi_files/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js.téléchargement" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload="hljs.initHighlightingOnLoad()"></script><link rel="icon" href="https://sachinkasaraddi.com/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="https://sachinkasaraddi.com/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="https://sachinkasaraddi.com/favicon-32x32.png"><link rel="apple-touch-icon" href="https://sachinkasaraddi.com/apple-touch-icon.png"><link rel="mask-icon" href="https://sachinkasaraddi.com/safari-pinned-tab.svg"><meta name="theme-color" content="#2e2e33"><meta name="msapplication-TileColor" content="#2e2e33"><meta name="generator" content="Hugo 0.82.0"><script type="application/javascript">var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-195304358-1','auto'),ga('send','pageview'))</script><meta property="og:title" content="Flutter: BLoC pattern using Stream"><meta property="og:description" content="This article will help you to understand BLoC pattern in Flutter using stream controller.
TL;DR: Recently, I started #100daysofCode challenge to learn flutter. Since Flutter 2.0 which is native performant, faster development and gone beyond mobile specific to web, desktop and embedded as well. So why not learn flutter?
As part of learning i was able to build crypto currencies app. Though i was happy building this app 😃 , but wasn’t satisfied with the way i wrote the app."><meta property="og:type" content="article"><meta property="og:url" content="https://sachinkasaraddi.com/posts/bloc-patter-using-stream/"><meta property="og:image" content="https://sachinkasaraddi.com/images/sachin-kasaraddi-bloc-banner.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-05-13T16:32:30+02:00"><meta property="article:modified_time" content="2021-05-14T07:19:10+02:00"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://sachinkasaraddi.com/images/sachin-kasaraddi-bloc-banner.png"><meta name="twitter:title" content="Flutter: BLoC pattern using Stream"><meta name="twitter:description" content="This article will help you to understand BLoC pattern in Flutter using stream controller.
TL;DR: Recently, I started #100daysofCode challenge to learn flutter. Since Flutter 2.0 which is native performant, faster development and gone beyond mobile specific to web, desktop and embedded as well. So why not learn flutter?
As part of learning i was able to build crypto currencies app. Though i was happy building this app 😃 , but wasn’t satisfied with the way i wrote the app."><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blog","item":"https://sachinkasaraddi.com/posts/"},{"@type":"ListItem","position":2,"name":"Flutter: BLoC pattern using Stream","item":"https://sachinkasaraddi.com/posts/bloc-patter-using-stream/"}]}</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"Flutter: BLoC pattern using Stream","name":"Flutter: BLoC pattern using Stream","description":"This article will help you to understand BLoC pattern in Flutter using stream controller.\nTL;DR: Recently, I started #100daysofCode challenge to learn flutter. Since Flutter 2.0 which is native performant, faster development and gone beyond mobile specific to web, desktop and embedded as well. So why not learn flutter?\nAs part of learning i was able to build crypto currencies app. Though i was happy building this app 😃 , but wasn\u0026rsquo;t satisfied with the way i wrote the app.","keywords":["Flutter","BLoC","Dart Streams"],"articleBody":"This article will help you to understand BLoC pattern in Flutter using stream controller.\nTL;DR: Recently, I started #100daysofCode challenge to learn flutter. Since Flutter 2.0 which is native performant, faster development and gone beyond mobile specific to web, desktop and embedded as well. So why not learn flutter?\nAs part of learning i was able to build crypto currencies app. Though i was happy building this app 😃 , but wasn’t satisfied with the way i wrote the app. Network call, business logic, widgets etc all in single file which obviously is not code readable, not more resilient to change, not easy to maintain etc, the list goes on. And the solution for all these issues is not something new which is architecture pattern. That is when I started exploring patterns in Flutter and found BLoC.\nWhy BLoC ? BLoC helps you to maintain separation of concerns. Concerns here refers to presentation layer and business logic layer.\n  Presentation layer in flutter is all about Widgets eg: Container, Row, Column etc can be any widget.\n  Business logic refers to algorithm that handles, exchange of information between (Network, or Database or Custom logic implementation) and user interface.\n  What is BLoC Bloc pattern is Business logic component where the main idea is to keep your business logic separate from UI layer. BLoC communicates between the business logic layer and presentation layer. BLoC takes events as input and compute the required business logic and returns the state. To perform this communication, we use Stream. So since we don’t know what is stream, let’s first understand what is stream?\nStream This pipe with two exposed ends entrance and exit is a Stream. To control stream we use StreamController.\n To insert any value into the stream is done via sink property of StreamController called as StreamSink. To read the data out of stream is done via stream property of StreamController called as Stream.  Example\nTo better understand Stream let’s see some basic example\n The above example just prints the values added to Stream.\nAs you can see in the example above, any data can be passed in stream (String, Int, list, map etc) or instead of data error can also be passed or even another stream can be passed. To consume the data or error added to stream can be listened via stream property of StreamController.\nStreamSubscription is the object that listens to the values added in stream via stream property of StreamController. It will be notified when something happens at the level of stream.\nfinal StreamSubscription _streamSubscription = _streamController.stream.listen((value) = print('$value')); Note: Please make sure to cancel the subscription and close the stream when no longer needed.\nNow since we are familiar with Stream lets understand the concept of BLoC using the stream\nAs you see in the above diagram, Widget communicates to BLoC and this communication happens via Stream.\nWidget sends the events to the BLoC via Sink (Events can be onTap, onPressed onLongPressed etc anything which user interacts with the UI layer)\nWidget receive the data from BLoC via Stream (Widget will listen to stream and hence will be notified any change in stream level. StreamSubscription in above example here can be considered as Widgets.)\nWidgets only emits the events and listen to data, Now widgets will only worry about the UI things and not about the business.\nExample\nLet’s create a class called Bloc and see things bit programatically now\n Note : Underscore in dart is used to make properties private. eg: _stateStreamController\nThis class initialise two streamControllers _eventStreamController and _stateStreamController. Each streamControllers holds different data types\nEventStreamController : Event\neventSink is exposed and made public so events can be added to eventsStreamController. eventsStream is not exposed or made public to make sure that events should not be corrupted.\nStateStreamController : List\n_stateSink is not exposed so the data should not be added from any other layer. stateStream is exposed to provide the data or widgets listening to data from Bloc.\nNow since we know why we are using two streamControllers within Bloc, let’s see on how to relate these two controllers by listening to events and adding value to state.\n Note: ApiManager class is responsible for fetching cryptoCurrencies list from network\nAbove snippet is initializing Bloc constructor which is listening to _eventsStream and performs network call if event is FETCH.\n If network call is success and data returned is not null then data is added to _stateSink.add(latestCurrencies) If network call is failed or data is null or even if there is any error from returned then error is added to _stateSink.addError(latestCurrencies)  This is how the events and state are managed within the BLoC. There can be any number of events added to eventsStream. StateStream can be listened from UI layer. StreamControllers should not be exposed or made public and also the function to release streamcontrollers should be exposed. So Bloc class looks like below code.\n Now since BLoC is ready for widgets to use lets start a simple StatefulWidget in flutter.\n This is simple stateful widget with empty container. But in initState() event is added to eventSink. Since Bloc is already listening to eventStream, network call is triggered and in return Bloc is ready with response. Now we need to consume that response and show in Widget. For that see the below gist.\n In the above gist please refer to buildCurrenciesList method which listens to bloc.stateStream. And widget react accordingly. If data hasError then error widget is shown. If data has value then list with currencies is shown.\n  Crypto App   For fully completed example with pagination, error state and networking implementation please see the source here. SachinKasaraddi/CryptoCurrencies\n","wordCount":"937","inLanguage":"en","image":"https://sachinkasaraddi.com/images/sachin-kasaraddi-bloc-banner.png","datePublished":"2021-05-13T16:32:30+02:00","dateModified":"2021-05-14T07:19:10+02:00","author":{"@type":"Person","name":"Sachin Kasaraddi"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://sachinkasaraddi.com/posts/bloc-patter-using-stream/"},"publisher":{"@type":"Organization","name":"Sachin Kasaraddi","logo":{"@type":"ImageObject","url":"https://sachinkasaraddi.com/favicon.ico"}}}</script><style type="text/css">
@font-face {
  font-weight: 400;
  font-style:  normal;
  font-family: 'Circular-Loom';

  src: url('https://cdn.loom.com/assets/fonts/circular/CircularXXWeb-Book-cd7d2bcec649b1243839a15d5eb8f0a3.woff2') format('woff2');
}

@font-face {
  font-weight: 500;
  font-style:  normal;
  font-family: 'Circular-Loom';

  src: url('https://cdn.loom.com/assets/fonts/circular/CircularXXWeb-Medium-d74eac43c78bd5852478998ce63dceb3.woff2') format('woff2');
}

@font-face {
  font-weight: 700;
  font-style:  normal;
  font-family: 'Circular-Loom';

  src: url('https://cdn.loom.com/assets/fonts/circular/CircularXXWeb-Bold-83b8ceaf77f49c7cffa44107561909e4.woff2') format('woff2');
}

@font-face {
  font-weight: 900;
  font-style:  normal;
  font-family: 'Circular-Loom';

  src: url('https://cdn.loom.com/assets/fonts/circular/CircularXXWeb-Black-bf067ecb8aa777ceb6df7d72226febca.woff2') format('woff2');
}</style></head><body id="top" class="dark"><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class="header"><nav class="nav"><div class="logo"><a href="https://sachinkasaraddi.com/" accesskey="h" title="Sachin Kasaraddi (Alt + H)">Sachin Kasaraddi</a>
<span class="logo-switches"><button id="theme-toggle" accesskey="t" title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></button></span></div><ul id="menu" onscroll="menu_on_scroll()"><li><a href="https://sachinkasaraddi.com/archives/" title="Archive"><span>Archive</span></a></li><li><a href="https://sachinkasaraddi.com/tags" title="Tags"><span>Tags</span></a></li></ul></nav></header><main class="main"><article class="post-single"><header class="post-header"><h1 class="post-title">Flutter: BLoC pattern using Stream</h1><div class="post-meta">May 13, 2021&nbsp;·&nbsp;5 min&nbsp;·&nbsp;Sachin Kasaraddi</div></header><figure class="entry-cover"><img loading="lazy" srcset="https://sachinkasaraddi.com/posts/bloc-patter-using-stream/images/sachin-kasaraddi-bloc-banner_hu61a5201b5a3a5ba9074a2962bfea35a2_64216_360x0_resize_box_2.png 360w ,https://sachinkasaraddi.com/posts/bloc-patter-using-stream/images/sachin-kasaraddi-bloc-banner_hu61a5201b5a3a5ba9074a2962bfea35a2_64216_480x0_resize_box_2.png 480w ,https://sachinkasaraddi.com/posts/bloc-patter-using-stream/images/sachin-kasaraddi-bloc-banner_hu61a5201b5a3a5ba9074a2962bfea35a2_64216_720x0_resize_box_2.png 720w ,https://sachinkasaraddi.com/posts/bloc-patter-using-stream/images/sachin-kasaraddi-bloc-banner_hu61a5201b5a3a5ba9074a2962bfea35a2_64216_1080x0_resize_box_2.png 1080w ,https://sachinkasaraddi.com/posts/bloc-patter-using-stream/images/sachin-kasaraddi-bloc-banner.png 1477w" sizes="(min-width: 768px) 720px, 100vw" src="./Flutter_ BLoC pattern using Stream _ Sachin Kasaraddi_files/sachin-kasaraddi-bloc-banner.png" alt="This article will help you to understand BLoC pattern in Flutter using stream controller."><p>This article will help you to understand BLoC pattern in Flutter using stream controller.</p></figure><div class="post-content"><p>This article will help you to understand BLoC pattern in Flutter using stream controller.</p><p>TL;DR: Recently, I started #100daysofCode challenge to learn flutter. Since Flutter 2.0 which is native performant, faster development and gone beyond mobile specific to web, desktop and embedded as well. So why not learn flutter?<br>As part of learning i was able to build <a href="https://github.com/SachinKasaraddi/Crypto">crypto currencies app</a>. Though i was happy building this app 😃 , but wasn’t satisfied with the way i wrote the app. Network call, business logic, widgets etc all in single file which obviously is not code readable, not more resilient to change, not easy to maintain etc, the list goes on. And the solution for all these issues is not something new which is architecture pattern. That is when I started exploring patterns in Flutter and found BLoC.</p><h2 id="why-bloc-">Why BLoC ?<a hidden="" class="anchor" aria-hidden="true" href="https://sachinkasaraddi.com/posts/bloc-patter-using-stream/#why-bloc-">#</a></h2><p>BLoC helps you to maintain separation of concerns. Concerns here refers to presentation layer and business logic layer.</p><ul><li><p>Presentation layer in flutter is all about Widgets eg: Container, Row, Column etc can be any widget.</p></li><li><p>Business logic refers to algorithm that handles, exchange of information between (Network, or Database or Custom logic implementation) and user interface.</p></li></ul><h2 id="what-is-bloc">What is BLoC<a hidden="" class="anchor" aria-hidden="true" href="https://sachinkasaraddi.com/posts/bloc-patter-using-stream/#what-is-bloc">#</a></h2><p>Bloc pattern is Business logic component where the main idea is to keep your business logic separate from UI layer. BLoC communicates between the business logic layer and presentation layer. BLoC takes events as input and compute the required business logic and returns the state. To perform this communication, we use <strong>Stream</strong>. So since we don’t know what is stream, let’s first understand what is stream?</p><h3 id="stream">Stream<a hidden="" class="anchor" aria-hidden="true" href="https://sachinkasaraddi.com/posts/bloc-patter-using-stream/#stream">#</a></h3><p><img loading="lazy" src="./Flutter_ BLoC pattern using Stream _ Sachin Kasaraddi_files/sachin_kasaraddi_streamcontroller.png" alt="Streams"></p><p>This pipe with two exposed ends entrance and exit is a <a href="https://api.dart.dev/stable/2.0.0/dart-async/Stream-class.html">Stream</a>. To control stream we use <a href="https://api.dart.dev/stable/2.12.4/dart-async/StreamController-class.html">StreamController</a>.</p><ul><li>To insert any value into the stream is done via sink property of StreamController called as <strong>StreamSink</strong>.</li><li>To read the data out of stream is done via stream property of StreamController called as <strong>Stream</strong>.</li></ul><p><strong>Example</strong></p><p>To better understand <em>Stream</em> let’s see some basic example</p><script type="application/javascript" src="./Flutter_ BLoC pattern using Stream _ Sachin Kasaraddi_files/7ead6e08cac45727366e4abd5a4d2e94.js.téléchargement"></script><link rel="stylesheet" href="./Flutter_ BLoC pattern using Stream _ Sachin Kasaraddi_files/gist-embed-5687a589e344.css"><div id="gist109459495" class="gist">
    <div class="gist-file" translate="no">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-single_subscription_stream-dart" class="file my-2">
    
    <div itemprop="text" class="Box-body p-0 blob-wrapper data type-dart  ">

        
<div class="js-check-bidi js-blob-code-container blob-code-content">

  <template class="js-file-alert-template"></template>
<template class="js-line-alert-template"></template>

  <table class="highlight tab-size js-file-line-container js-code-nav-container js-tagsearch-file" data-tab-size="8" data-paste-markdown-skip="" data-tagsearch-lang="Dart" data-tagsearch-path="single_subscription_stream.dart">
        <tbody><tr>
          <td id="file-single_subscription_stream-dart-L1" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="1"></td>
          <td id="file-single_subscription_stream-dart-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">import</span> <span class="pl-s">'dart:async'</span>;</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L2" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="2"></td>
          <td id="file-single_subscription_stream-dart-LC2" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L3" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="3"></td>
          <td id="file-single_subscription_stream-dart-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-c">// Stream basic example</span></td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L4" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="4"></td>
          <td id="file-single_subscription_stream-dart-LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-k">void</span> <span class="pl-en">main</span>(<span class="pl-c1">List&lt;<span class="pl-c1">String</span>&gt;</span> args) {</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L5" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="5"></td>
          <td id="file-single_subscription_stream-dart-LC5" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L6" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="6"></td>
          <td id="file-single_subscription_stream-dart-LC6" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">//Initialize a stream controller</span></td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L7" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="7"></td>
          <td id="file-single_subscription_stream-dart-LC7" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">final</span> <span class="pl-c1">StreamController</span> _streamController <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">StreamController</span>();</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L8" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="8"></td>
          <td id="file-single_subscription_stream-dart-LC8" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L9" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="9"></td>
          <td id="file-single_subscription_stream-dart-LC9" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// Add any type of value String, Int, List, Map etc</span></td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L10" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="10"></td>
          <td id="file-single_subscription_stream-dart-LC10" class="blob-code blob-code-inner js-file-line">  _streamController.<span class="pl-en">add</span>(<span class="pl-s">'String'</span>);</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L11" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="11"></td>
          <td id="file-single_subscription_stream-dart-LC11" class="blob-code blob-code-inner js-file-line">  _streamController.<span class="pl-en">add</span>(<span class="pl-c1">12345</span>);</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L12" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="12"></td>
          <td id="file-single_subscription_stream-dart-LC12" class="blob-code blob-code-inner js-file-line">  _streamController.<span class="pl-en">add</span>([<span class="pl-s">'First'</span>, <span class="pl-s">'Second'</span>, <span class="pl-s">'Third'</span>]);</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L13" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="13"></td>
          <td id="file-single_subscription_stream-dart-LC13" class="blob-code blob-code-inner js-file-line">  _streamController</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L14" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="14"></td>
          <td id="file-single_subscription_stream-dart-LC14" class="blob-code blob-code-inner js-file-line">      .<span class="pl-en">add</span>({<span class="pl-s">'firstKey'</span><span class="pl-k">:</span> <span class="pl-s">'firstValue'</span>, <span class="pl-s">'secondKey'</span><span class="pl-k">:</span> <span class="pl-s">'secondValue'</span>});</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L15" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="15"></td>
          <td id="file-single_subscription_stream-dart-LC15" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L16" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="16"></td>
          <td id="file-single_subscription_stream-dart-LC16" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// Add a error </span></td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L17" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="17"></td>
          <td id="file-single_subscription_stream-dart-LC17" class="blob-code blob-code-inner js-file-line">  _streamController.<span class="pl-en">addError</span>(<span class="pl-s">'This is the error.'</span>);</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L18" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="18"></td>
          <td id="file-single_subscription_stream-dart-LC18" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L19" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="19"></td>
          <td id="file-single_subscription_stream-dart-LC19" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// Initialize a listner which simply prints the value, error and message after finishing.</span></td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L20" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="20"></td>
          <td id="file-single_subscription_stream-dart-LC20" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">final</span> <span class="pl-c1">StreamSubscription</span> _streamSubscription <span class="pl-k">=</span></td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L21" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="21"></td>
          <td id="file-single_subscription_stream-dart-LC21" class="blob-code blob-code-inner js-file-line">      _streamController.stream.<span class="pl-en">listen</span>((value) <span class="pl-k">=&gt;</span> <span class="pl-en">print</span>(<span class="pl-s">'$<span class="pl-v">value</span>'</span>));</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L22" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="22"></td>
          <td id="file-single_subscription_stream-dart-LC22" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L23" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="23"></td>
          <td id="file-single_subscription_stream-dart-LC23" class="blob-code blob-code-inner js-file-line">  _streamSubscription.<span class="pl-en">onError</span>((e) {</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L24" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="24"></td>
          <td id="file-single_subscription_stream-dart-LC24" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">print</span>(<span class="pl-s">'Exception:$<span class="pl-v">e</span>'</span>);</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L25" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="25"></td>
          <td id="file-single_subscription_stream-dart-LC25" class="blob-code blob-code-inner js-file-line">  });</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L26" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="26"></td>
          <td id="file-single_subscription_stream-dart-LC26" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L27" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="27"></td>
          <td id="file-single_subscription_stream-dart-LC27" class="blob-code blob-code-inner js-file-line">  _streamSubscription.<span class="pl-en">onDone</span>(() {</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L28" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="28"></td>
          <td id="file-single_subscription_stream-dart-LC28" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">print</span>(<span class="pl-s">'No More data in stream.'</span>);</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L29" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="29"></td>
          <td id="file-single_subscription_stream-dart-LC29" class="blob-code blob-code-inner js-file-line">  });</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L30" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="30"></td>
          <td id="file-single_subscription_stream-dart-LC30" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L31" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="31"></td>
          <td id="file-single_subscription_stream-dart-LC31" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// Release the streamController.</span></td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L32" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="32"></td>
          <td id="file-single_subscription_stream-dart-LC32" class="blob-code blob-code-inner js-file-line">  _streamController.<span class="pl-en">close</span>();</td>
        </tr>
        <tr>
          <td id="file-single_subscription_stream-dart-L33" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="33"></td>
          <td id="file-single_subscription_stream-dart-LC33" class="blob-code blob-code-inner js-file-line">}</td>
        </tr>
  </tbody></table>
</div>


    </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/SachinKasaraddi/7ead6e08cac45727366e4abd5a4d2e94/raw/5244211faecbf80e296a34ac975f9ef5ecfd93b4/single_subscription_stream.dart" style="float:right">view raw</a>
        <a href="https://gist.github.com/SachinKasaraddi/7ead6e08cac45727366e4abd5a4d2e94#file-single_subscription_stream-dart">
          single_subscription_stream.dart
        </a>
        hosted with ❤ by <a href="https://github.com/">GitHub</a>
      </div>
    </div>
</div>
<p>The above example just prints the values added to Stream.</p><p>As you can see in the example above, any data can be passed in stream (String, Int, list, map etc) or instead of data error can also be passed or even another stream can be passed. To consume the data or error added to stream can be listened via stream property of StreamController.</p><p>StreamSubscription is the object that listens to the values added in stream via stream property of StreamController. It will be notified when something happens at the level of stream.</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">final</span> StreamSubscription _streamSubscription <span style="color:#f92672">=</span>
      _streamController.stream.listen((value) <span style="color:#f92672">=&gt;</span> print(<span style="color:#e6db74">'</span><span style="color:#e6db74">$</span>value<span style="color:#e6db74">'</span>));
</code></pre><button class="copy-code">copy</button></div><p><em>Note: Please make sure to cancel the subscription and close the stream when no longer needed.</em></p><p>Now since we are familiar with Stream lets understand the concept of BLoC using the stream</p><p><img loading="lazy" src="./Flutter_ BLoC pattern using Stream _ Sachin Kasaraddi_files/sachin_kasaraddi_bloc_diagram.png" alt="BLoC Diagram"></p><p>As you see in the above diagram, Widget communicates to BLoC and this communication happens via Stream.</p><p>Widget sends the events to the BLoC via Sink (Events can be onTap, onPressed onLongPressed etc anything which user interacts with the UI layer)</p><p>Widget receive the data from BLoC via Stream (Widget will listen to stream and hence will be notified any change in stream level. StreamSubscription in above example here can be considered as Widgets.)</p><p>Widgets only emits the events and listen to data, Now widgets will only worry about the UI things and not about the business.</p><p><strong>Example</strong></p><p>Let’s create a class called <em>Bloc</em> and see things bit programatically now</p><script type="application/javascript" src="./Flutter_ BLoC pattern using Stream _ Sachin Kasaraddi_files/49d97a26ef84c461b1352181d6295080.js.téléchargement"></script><link rel="stylesheet" href="./Flutter_ BLoC pattern using Stream _ Sachin Kasaraddi_files/gist-embed-5687a589e344.css"><div id="gist109482818" class="gist">
    <div class="gist-file" translate="no">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-streamcontrollers-dart" class="file my-2">
    
    <div itemprop="text" class="Box-body p-0 blob-wrapper data type-dart  ">

        
<div class="js-check-bidi js-blob-code-container blob-code-content">

  <template class="js-file-alert-template"></template>
<template class="js-line-alert-template"></template>

  <table class="highlight tab-size js-file-line-container js-code-nav-container js-tagsearch-file" data-tab-size="8" data-paste-markdown-skip="" data-tagsearch-lang="Dart" data-tagsearch-path="streamcontrollers.dart">
        <tbody><tr>
          <td id="file-streamcontrollers-dart-L1" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="1"></td>
          <td id="file-streamcontrollers-dart-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">import</span> <span class="pl-s">'dart:async'</span>;</td>
        </tr>
        <tr>
          <td id="file-streamcontrollers-dart-L2" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="2"></td>
          <td id="file-streamcontrollers-dart-LC2" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-streamcontrollers-dart-L3" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="3"></td>
          <td id="file-streamcontrollers-dart-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-k">class</span> <span class="pl-c1">Bloc</span> {</td>
        </tr>
        <tr>
          <td id="file-streamcontrollers-dart-L4" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="4"></td>
          <td id="file-streamcontrollers-dart-LC4" class="blob-code blob-code-inner js-file-line">  </td>
        </tr>
        <tr>
          <td id="file-streamcontrollers-dart-L5" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="5"></td>
          <td id="file-streamcontrollers-dart-LC5" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// Stream Controller for events from widget</span></td>
        </tr>
        <tr>
          <td id="file-streamcontrollers-dart-L6" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="6"></td>
          <td id="file-streamcontrollers-dart-LC6" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">final</span> _eventStreamController <span class="pl-k">=</span> <span class="pl-c1">StreamController&lt;<span class="pl-c1">Event</span>&gt;</span>();</td>
        </tr>
        <tr>
          <td id="file-streamcontrollers-dart-L7" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="7"></td>
          <td id="file-streamcontrollers-dart-LC7" class="blob-code blob-code-inner js-file-line">  <span class="pl-c1">StreamSink&lt;<span class="pl-c1">Event</span>&gt;</span> <span class="pl-k">get</span> <span class="pl-en">eventSink</span> =&gt; _eventStreamController.sink;</td>
        </tr>
        <tr>
          <td id="file-streamcontrollers-dart-L8" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="8"></td>
          <td id="file-streamcontrollers-dart-LC8" class="blob-code blob-code-inner js-file-line">  <span class="pl-c1">Stream&lt;<span class="pl-c1">Event</span>&gt;</span> <span class="pl-k">get</span> <span class="pl-en">_eventStream</span> =&gt; _eventStreamController.stream;</td>
        </tr>
        <tr>
          <td id="file-streamcontrollers-dart-L9" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="9"></td>
          <td id="file-streamcontrollers-dart-LC9" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-streamcontrollers-dart-L10" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="10"></td>
          <td id="file-streamcontrollers-dart-LC10" class="blob-code blob-code-inner js-file-line">  </td>
        </tr>
        <tr>
          <td id="file-streamcontrollers-dart-L11" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="11"></td>
          <td id="file-streamcontrollers-dart-LC11" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// Stream Controller for Crypto currencies list</span></td>
        </tr>
        <tr>
          <td id="file-streamcontrollers-dart-L12" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="12"></td>
          <td id="file-streamcontrollers-dart-LC12" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">final</span> _stateStreamController <span class="pl-k">=</span> <span class="pl-c1">StreamController&lt;<span class="pl-c1">List&lt;<span class="pl-c1">String</span>&gt;&gt;</span></span>();</td>
        </tr>
        <tr>
          <td id="file-streamcontrollers-dart-L13" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="13"></td>
          <td id="file-streamcontrollers-dart-LC13" class="blob-code blob-code-inner js-file-line">  <span class="pl-c1">StreamSink&lt;<span class="pl-c1">List&lt;<span class="pl-c1">String</span>&gt;&gt;</span></span> <span class="pl-k">get</span> <span class="pl-en">_stateSink</span> =&gt;</td>
        </tr>
        <tr>
          <td id="file-streamcontrollers-dart-L14" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="14"></td>
          <td id="file-streamcontrollers-dart-LC14" class="blob-code blob-code-inner js-file-line">      _stateStreamController.sink;</td>
        </tr>
        <tr>
          <td id="file-streamcontrollers-dart-L15" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="15"></td>
          <td id="file-streamcontrollers-dart-LC15" class="blob-code blob-code-inner js-file-line">  <span class="pl-c1">Stream&lt;<span class="pl-c1">List&lt;<span class="pl-c1">String</span>&gt;&gt;</span></span> <span class="pl-k">get</span> <span class="pl-en">stateStream</span> =&gt;</td>
        </tr>
        <tr>
          <td id="file-streamcontrollers-dart-L16" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="16"></td>
          <td id="file-streamcontrollers-dart-LC16" class="blob-code blob-code-inner js-file-line">      _stateStreamController.stream;</td>
        </tr>
        <tr>
          <td id="file-streamcontrollers-dart-L17" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="17"></td>
          <td id="file-streamcontrollers-dart-LC17" class="blob-code blob-code-inner js-file-line">}</td>
        </tr>
        <tr>
          <td id="file-streamcontrollers-dart-L18" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="18"></td>
          <td id="file-streamcontrollers-dart-LC18" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-streamcontrollers-dart-L19" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="19"></td>
          <td id="file-streamcontrollers-dart-LC19" class="blob-code blob-code-inner js-file-line"><span class="pl-k">enum</span> <span class="pl-c1">Event</span> { <span class="pl-c1">FETCH</span> }</td>
        </tr>
  </tbody></table>
</div>


    </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/SachinKasaraddi/49d97a26ef84c461b1352181d6295080/raw/46912fa215cb7d9b0e9d7f6364d0c37c603b93f3/streamcontrollers.dart" style="float:right">view raw</a>
        <a href="https://gist.github.com/SachinKasaraddi/49d97a26ef84c461b1352181d6295080#file-streamcontrollers-dart">
          streamcontrollers.dart
        </a>
        hosted with ❤ by <a href="https://github.com/">GitHub</a>
      </div>
    </div>
</div>
<p>Note : Underscore in dart is used to make properties private. eg: _stateStreamController</p><p>This class initialise two streamControllers _eventStreamController and _stateStreamController.
Each streamControllers holds different data types</p><p>EventStreamController : <code>Event</code></p><p>eventSink is exposed and made public so events can be added to eventsStreamController.<br>eventsStream is not exposed or made public to make sure that events should not be corrupted.</p><p>StateStreamController : <code>List&lt;String&gt;</code></p><p>_stateSink is not exposed so the data should not be added from any other layer.
stateStream is exposed to provide the data or widgets listening to data from Bloc.</p><p>Now since we know why we are using two streamControllers within Bloc, let’s see on how to relate these two controllers by listening to events and adding value to state.</p><script type="application/javascript" src="./Flutter_ BLoC pattern using Stream _ Sachin Kasaraddi_files/3d247bb37f39f6c7d04969323e152abd.js.téléchargement"></script><link rel="stylesheet" href="./Flutter_ BLoC pattern using Stream _ Sachin Kasaraddi_files/gist-embed-5687a589e344.css"><div id="gist109483399" class="gist">
    <div class="gist-file" translate="no">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-bloc_constructor-dart" class="file my-2">
    
    <div itemprop="text" class="Box-body p-0 blob-wrapper data type-dart  ">

        
<div class="js-check-bidi js-blob-code-container blob-code-content">

  <template class="js-file-alert-template"></template>
<template class="js-line-alert-template"></template>

  <table class="highlight tab-size js-file-line-container js-code-nav-container js-tagsearch-file" data-tab-size="8" data-paste-markdown-skip="" data-tagsearch-lang="Dart" data-tagsearch-path="bloc_constructor.dart">
        <tbody><tr>
          <td id="file-bloc_constructor-dart-L1" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="1"></td>
          <td id="file-bloc_constructor-dart-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">Bloc</span>() {</td>
        </tr>
        <tr>
          <td id="file-bloc_constructor-dart-L2" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="2"></td>
          <td id="file-bloc_constructor-dart-LC2" class="blob-code blob-code-inner js-file-line">    _eventStream.<span class="pl-en">listen</span>((event) <span class="pl-k">async</span> {</td>
        </tr>
        <tr>
          <td id="file-bloc_constructor-dart-L3" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="3"></td>
          <td id="file-bloc_constructor-dart-LC3" class="blob-code blob-code-inner js-file-line">      <span class="pl-k">if</span> (event <span class="pl-k">==</span> <span class="pl-c1">Events</span>.<span class="pl-c1">FETCH</span>) {</td>
        </tr>
        <tr>
          <td id="file-bloc_constructor-dart-L4" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="4"></td>
          <td id="file-bloc_constructor-dart-LC4" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">try</span> {</td>
        </tr>
        <tr>
          <td id="file-bloc_constructor-dart-L5" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="5"></td>
          <td id="file-bloc_constructor-dart-LC5" class="blob-code blob-code-inner js-file-line">          <span class="pl-k">var</span> latestCurrencies <span class="pl-k">=</span> <span class="pl-k">await</span> <span class="pl-c1">ApiManager</span>().<span class="pl-en">getCryptoCurrencies</span>();</td>
        </tr>
        <tr>
          <td id="file-bloc_constructor-dart-L6" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="6"></td>
          <td id="file-bloc_constructor-dart-LC6" class="blob-code blob-code-inner js-file-line">          <span class="pl-k">if</span> (latestCurrencies <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</td>
        </tr>
        <tr>
          <td id="file-bloc_constructor-dart-L7" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="7"></td>
          <td id="file-bloc_constructor-dart-LC7" class="blob-code blob-code-inner js-file-line">            _stateSink.<span class="pl-en">add</span>(latestCurrencies);</td>
        </tr>
        <tr>
          <td id="file-bloc_constructor-dart-L8" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="8"></td>
          <td id="file-bloc_constructor-dart-LC8" class="blob-code blob-code-inner js-file-line">          } <span class="pl-k">else</span> {</td>
        </tr>
        <tr>
          <td id="file-bloc_constructor-dart-L9" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="9"></td>
          <td id="file-bloc_constructor-dart-LC9" class="blob-code blob-code-inner js-file-line">            _stateSink.<span class="pl-en">addError</span>(<span class="pl-s">'Empty currencies!!'</span>);</td>
        </tr>
        <tr>
          <td id="file-bloc_constructor-dart-L10" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="10"></td>
          <td id="file-bloc_constructor-dart-LC10" class="blob-code blob-code-inner js-file-line">          }</td>
        </tr>
        <tr>
          <td id="file-bloc_constructor-dart-L11" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="11"></td>
          <td id="file-bloc_constructor-dart-LC11" class="blob-code blob-code-inner js-file-line">        } <span class="pl-k">catch</span> (e) {</td>
        </tr>
        <tr>
          <td id="file-bloc_constructor-dart-L12" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="12"></td>
          <td id="file-bloc_constructor-dart-LC12" class="blob-code blob-code-inner js-file-line">          _stateSink.<span class="pl-en">addError</span>(<span class="pl-s">'Something went wrong,Please try later'</span>);</td>
        </tr>
        <tr>
          <td id="file-bloc_constructor-dart-L13" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="13"></td>
          <td id="file-bloc_constructor-dart-LC13" class="blob-code blob-code-inner js-file-line">        }</td>
        </tr>
        <tr>
          <td id="file-bloc_constructor-dart-L14" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="14"></td>
          <td id="file-bloc_constructor-dart-LC14" class="blob-code blob-code-inner js-file-line">      }</td>
        </tr>
        <tr>
          <td id="file-bloc_constructor-dart-L15" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="15"></td>
          <td id="file-bloc_constructor-dart-LC15" class="blob-code blob-code-inner js-file-line">    });</td>
        </tr>
        <tr>
          <td id="file-bloc_constructor-dart-L16" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="16"></td>
          <td id="file-bloc_constructor-dart-LC16" class="blob-code blob-code-inner js-file-line">  }</td>
        </tr>
  </tbody></table>
</div>


    </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/SachinKasaraddi/3d247bb37f39f6c7d04969323e152abd/raw/56a07e8f84294a44e561cc02889359153eae0fc8/bloc_constructor.dart" style="float:right">view raw</a>
        <a href="https://gist.github.com/SachinKasaraddi/3d247bb37f39f6c7d04969323e152abd#file-bloc_constructor-dart">
          bloc_constructor.dart
        </a>
        hosted with ❤ by <a href="https://github.com/">GitHub</a>
      </div>
    </div>
</div>
<p><em>Note: ApiManager class is responsible for fetching cryptoCurrencies list from network</em></p><p>Above snippet is initializing Bloc constructor which is listening to <em>_eventsStream</em> and performs network call if event is FETCH.</p><ul><li>If network call is success and data returned is not null then data is added to _stateSink.add(latestCurrencies)</li><li>If network call is failed or data is null or even if there is any error from returned then error is added to _stateSink.addError(latestCurrencies)</li></ul><p>This is how the events and state are managed within the BLoC. There can be any number of events added to eventsStream. StateStream can be listened from UI layer.
StreamControllers should not be exposed or made public and also the function to release streamcontrollers should be exposed. So Bloc class looks like below code.</p><script type="application/javascript" src="./Flutter_ BLoC pattern using Stream _ Sachin Kasaraddi_files/ff8b4ecd65e9d1af7eff3af232b703f4.js.téléchargement"></script><link rel="stylesheet" href="./Flutter_ BLoC pattern using Stream _ Sachin Kasaraddi_files/gist-embed-5687a589e344.css"><div id="gist109482791" class="gist">
    <div class="gist-file" translate="no">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-event_and_state_bloc-dart" class="file my-2">
    
    <div itemprop="text" class="Box-body p-0 blob-wrapper data type-dart  ">

        
<div class="js-check-bidi js-blob-code-container blob-code-content">

  <template class="js-file-alert-template"></template>
<template class="js-line-alert-template"></template>

  <table class="highlight tab-size js-file-line-container js-code-nav-container js-tagsearch-file" data-tab-size="8" data-paste-markdown-skip="" data-tagsearch-lang="Dart" data-tagsearch-path="event_and_state_bloc.dart">
        <tbody><tr>
          <td id="file-event_and_state_bloc-dart-L1" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="1"></td>
          <td id="file-event_and_state_bloc-dart-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">import</span> <span class="pl-s">'dart:async'</span>;</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L2" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="2"></td>
          <td id="file-event_and_state_bloc-dart-LC2" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L3" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="3"></td>
          <td id="file-event_and_state_bloc-dart-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-k">import</span> <span class="pl-s">'package:cryptoapp/services/api_manager.dart'</span>;</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L4" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="4"></td>
          <td id="file-event_and_state_bloc-dart-LC4" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L5" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="5"></td>
          <td id="file-event_and_state_bloc-dart-LC5" class="blob-code blob-code-inner js-file-line"><span class="pl-k">class</span> <span class="pl-c1">Bloc</span> {</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L6" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="6"></td>
          <td id="file-event_and_state_bloc-dart-LC6" class="blob-code blob-code-inner js-file-line">  </td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L7" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="7"></td>
          <td id="file-event_and_state_bloc-dart-LC7" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// Stream Controller for Crypto currencies list</span></td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L8" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="8"></td>
          <td id="file-event_and_state_bloc-dart-LC8" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">final</span> _stateStreamController <span class="pl-k">=</span> <span class="pl-c1">StreamController&lt;<span class="pl-c1">List&lt;<span class="pl-c1">String</span>?&gt;&gt;</span></span>();</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L9" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="9"></td>
          <td id="file-event_and_state_bloc-dart-LC9" class="blob-code blob-code-inner js-file-line">  <span class="pl-c1">StreamSink&lt;<span class="pl-c1">List&lt;<span class="pl-c1">String</span>?&gt;&gt;</span></span> <span class="pl-k">get</span> <span class="pl-en">_stateSink</span> =&gt;</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L10" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="10"></td>
          <td id="file-event_and_state_bloc-dart-LC10" class="blob-code blob-code-inner js-file-line">      _stateStreamController.sink;</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L11" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="11"></td>
          <td id="file-event_and_state_bloc-dart-LC11" class="blob-code blob-code-inner js-file-line">  <span class="pl-c1">Stream&lt;<span class="pl-c1">List&lt;<span class="pl-c1">String</span>?&gt;&gt;</span></span> <span class="pl-k">get</span> <span class="pl-en">stateStream</span> =&gt;</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L12" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="12"></td>
          <td id="file-event_and_state_bloc-dart-LC12" class="blob-code blob-code-inner js-file-line">      _stateStreamController.stream;</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L13" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="13"></td>
          <td id="file-event_and_state_bloc-dart-LC13" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L14" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="14"></td>
          <td id="file-event_and_state_bloc-dart-LC14" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// Stream Controller for events from widget</span></td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L15" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="15"></td>
          <td id="file-event_and_state_bloc-dart-LC15" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">final</span> _eventStreamController <span class="pl-k">=</span> <span class="pl-c1">StreamController&lt;<span class="pl-c1">Events</span>&gt;</span>();</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L16" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="16"></td>
          <td id="file-event_and_state_bloc-dart-LC16" class="blob-code blob-code-inner js-file-line">  <span class="pl-c1">StreamSink&lt;<span class="pl-c1">Events</span>&gt;</span> <span class="pl-k">get</span> <span class="pl-en">eventSink</span> =&gt; _eventStreamController.sink;</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L17" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="17"></td>
          <td id="file-event_and_state_bloc-dart-LC17" class="blob-code blob-code-inner js-file-line">  <span class="pl-c1">Stream&lt;<span class="pl-c1">Events</span>&gt;</span> <span class="pl-k">get</span> <span class="pl-en">_eventStream</span> =&gt; _eventStreamController.stream;</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L18" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="18"></td>
          <td id="file-event_and_state_bloc-dart-LC18" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L19" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="19"></td>
          <td id="file-event_and_state_bloc-dart-LC19" class="blob-code blob-code-inner js-file-line">  <span class="pl-c1">Bloc</span>() {</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L20" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="20"></td>
          <td id="file-event_and_state_bloc-dart-LC20" class="blob-code blob-code-inner js-file-line">    _eventStream.<span class="pl-en">listen</span>((event) <span class="pl-k">async</span> {</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L21" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="21"></td>
          <td id="file-event_and_state_bloc-dart-LC21" class="blob-code blob-code-inner js-file-line">      <span class="pl-k">if</span> (event <span class="pl-k">==</span> <span class="pl-c1">Events</span>.<span class="pl-c1">FETCH</span>) {</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L22" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="22"></td>
          <td id="file-event_and_state_bloc-dart-LC22" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">try</span> {</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L23" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="23"></td>
          <td id="file-event_and_state_bloc-dart-LC23" class="blob-code blob-code-inner js-file-line">          <span class="pl-k">var</span> latestCurrencies <span class="pl-k">=</span> <span class="pl-k">await</span> <span class="pl-c1">ApiManager</span>().<span class="pl-en">getCryptoCurrencies</span>();</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L24" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="24"></td>
          <td id="file-event_and_state_bloc-dart-LC24" class="blob-code blob-code-inner js-file-line">          <span class="pl-k">if</span> (latestCurrencies <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L25" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="25"></td>
          <td id="file-event_and_state_bloc-dart-LC25" class="blob-code blob-code-inner js-file-line">            _stateSink.<span class="pl-en">add</span>(latestCurrencies);</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L26" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="26"></td>
          <td id="file-event_and_state_bloc-dart-LC26" class="blob-code blob-code-inner js-file-line">          } <span class="pl-k">else</span> {</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L27" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="27"></td>
          <td id="file-event_and_state_bloc-dart-LC27" class="blob-code blob-code-inner js-file-line">            _stateSink.<span class="pl-en">addError</span>(<span class="pl-s">'Empty currencies!!'</span>);</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L28" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="28"></td>
          <td id="file-event_and_state_bloc-dart-LC28" class="blob-code blob-code-inner js-file-line">          }</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L29" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="29"></td>
          <td id="file-event_and_state_bloc-dart-LC29" class="blob-code blob-code-inner js-file-line">        } <span class="pl-k">catch</span> (e) {</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L30" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="30"></td>
          <td id="file-event_and_state_bloc-dart-LC30" class="blob-code blob-code-inner js-file-line">          _stateSink.<span class="pl-en">addError</span>(<span class="pl-s">'Something went wrong,Please try later'</span>);</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L31" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="31"></td>
          <td id="file-event_and_state_bloc-dart-LC31" class="blob-code blob-code-inner js-file-line">        }</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L32" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="32"></td>
          <td id="file-event_and_state_bloc-dart-LC32" class="blob-code blob-code-inner js-file-line">      }</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L33" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="33"></td>
          <td id="file-event_and_state_bloc-dart-LC33" class="blob-code blob-code-inner js-file-line">    });</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L34" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="34"></td>
          <td id="file-event_and_state_bloc-dart-LC34" class="blob-code blob-code-inner js-file-line">  }</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L35" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="35"></td>
          <td id="file-event_and_state_bloc-dart-LC35" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L36" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="36"></td>
          <td id="file-event_and_state_bloc-dart-LC36" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// Release streamcontrollers (can be called from dispose function of Stateful Widget)</span></td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L37" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="37"></td>
          <td id="file-event_and_state_bloc-dart-LC37" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">void</span> <span class="pl-en">dispose</span>() {</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L38" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="38"></td>
          <td id="file-event_and_state_bloc-dart-LC38" class="blob-code blob-code-inner js-file-line">    _stateStreamController.<span class="pl-en">close</span>();</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L39" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="39"></td>
          <td id="file-event_and_state_bloc-dart-LC39" class="blob-code blob-code-inner js-file-line">    _eventStreamController.<span class="pl-en">close</span>();</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L40" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="40"></td>
          <td id="file-event_and_state_bloc-dart-LC40" class="blob-code blob-code-inner js-file-line">  }</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L41" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="41"></td>
          <td id="file-event_and_state_bloc-dart-LC41" class="blob-code blob-code-inner js-file-line">}</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L42" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="42"></td>
          <td id="file-event_and_state_bloc-dart-LC42" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-event_and_state_bloc-dart-L43" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="43"></td>
          <td id="file-event_and_state_bloc-dart-LC43" class="blob-code blob-code-inner js-file-line"><span class="pl-k">enum</span> <span class="pl-c1">Events</span> { <span class="pl-c1">FETCH</span> }</td>
        </tr>
  </tbody></table>
</div>


    </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/SachinKasaraddi/ff8b4ecd65e9d1af7eff3af232b703f4/raw/006c5998a085c868bc7a20d5c581569608cb9040/event_and_state_bloc.dart" style="float:right">view raw</a>
        <a href="https://gist.github.com/SachinKasaraddi/ff8b4ecd65e9d1af7eff3af232b703f4#file-event_and_state_bloc-dart">
          event_and_state_bloc.dart
        </a>
        hosted with ❤ by <a href="https://github.com/">GitHub</a>
      </div>
    </div>
</div>
<p>Now since BLoC is ready for widgets to use lets start a simple StatefulWidget in flutter.</p><script type="application/javascript" src="./Flutter_ BLoC pattern using Stream _ Sachin Kasaraddi_files/a3cdb1d065bdf4c69dc3cb16dfcd4456.js.téléchargement"></script><link rel="stylesheet" href="./Flutter_ BLoC pattern using Stream _ Sachin Kasaraddi_files/gist-embed-5687a589e344.css"><div id="gist109488371" class="gist">
    <div class="gist-file" translate="no">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-stateful_widget-dart" class="file my-2">
    
    <div itemprop="text" class="Box-body p-0 blob-wrapper data type-dart  ">

        
<div class="js-check-bidi js-blob-code-container blob-code-content">

  <template class="js-file-alert-template"></template>
<template class="js-line-alert-template"></template>

  <table class="highlight tab-size js-file-line-container js-code-nav-container js-tagsearch-file" data-tab-size="8" data-paste-markdown-skip="" data-tagsearch-lang="Dart" data-tagsearch-path="stateful_widget.dart">
        <tbody><tr>
          <td id="file-stateful_widget-dart-L1" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="1"></td>
          <td id="file-stateful_widget-dart-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">import</span> <span class="pl-s">'package:flutter/material.dart'</span>;</td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L2" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="2"></td>
          <td id="file-stateful_widget-dart-LC2" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L3" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="3"></td>
          <td id="file-stateful_widget-dart-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-k">class</span> <span class="pl-c1">CurrenciesList</span> <span class="pl-k">extends</span> <span class="pl-c1">StatefulWidget</span> {</td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L4" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="4"></td>
          <td id="file-stateful_widget-dart-LC4" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">@override</span></td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L5" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="5"></td>
          <td id="file-stateful_widget-dart-LC5" class="blob-code blob-code-inner js-file-line">  <span class="pl-c1">_CurrenciesListState</span> <span class="pl-en">createState</span>() <span class="pl-k">=&gt;</span> <span class="pl-c1">_CurrenciesListState</span>();</td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L6" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="6"></td>
          <td id="file-stateful_widget-dart-LC6" class="blob-code blob-code-inner js-file-line">}</td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L7" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="7"></td>
          <td id="file-stateful_widget-dart-LC7" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L8" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="8"></td>
          <td id="file-stateful_widget-dart-LC8" class="blob-code blob-code-inner js-file-line"><span class="pl-k">class</span> <span class="pl-c1">_CurrenciesListState</span> <span class="pl-k">extends</span> <span class="pl-c1">State&lt;<span class="pl-c1">CurrenciesList</span>&gt;</span> {</td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L9" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="9"></td>
          <td id="file-stateful_widget-dart-LC9" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">final</span> bloc <span class="pl-k">=</span> <span class="pl-c1">Bloc</span>();</td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L10" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="10"></td>
          <td id="file-stateful_widget-dart-LC10" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L11" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="11"></td>
          <td id="file-stateful_widget-dart-LC11" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">@override</span></td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L12" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="12"></td>
          <td id="file-stateful_widget-dart-LC12" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">void</span> <span class="pl-en">initState</span>() {</td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L13" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="13"></td>
          <td id="file-stateful_widget-dart-LC13" class="blob-code blob-code-inner js-file-line">    bloc.eventSink.<span class="pl-en">add</span>(<span class="pl-c1">Event</span>.<span class="pl-c1">FETCH</span>);</td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L14" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="14"></td>
          <td id="file-stateful_widget-dart-LC14" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">super</span>.<span class="pl-en">initState</span>();</td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L15" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="15"></td>
          <td id="file-stateful_widget-dart-LC15" class="blob-code blob-code-inner js-file-line">  }</td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L16" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="16"></td>
          <td id="file-stateful_widget-dart-LC16" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L17" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="17"></td>
          <td id="file-stateful_widget-dart-LC17" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">@override</span></td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L18" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="18"></td>
          <td id="file-stateful_widget-dart-LC18" class="blob-code blob-code-inner js-file-line">  <span class="pl-c1">Widget</span> <span class="pl-en">build</span>(<span class="pl-c1">BuildContext</span> context) {</td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L19" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="19"></td>
          <td id="file-stateful_widget-dart-LC19" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">return</span> <span class="pl-c1">Scaffold</span>(</td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L20" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="20"></td>
          <td id="file-stateful_widget-dart-LC20" class="blob-code blob-code-inner js-file-line">      appBar<span class="pl-k">:</span> <span class="pl-c1">AppBar</span>(</td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L21" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="21"></td>
          <td id="file-stateful_widget-dart-LC21" class="blob-code blob-code-inner js-file-line">        title<span class="pl-k">:</span> <span class="pl-c1">Text</span>(<span class="pl-s">"Crypto"</span>),</td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L22" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="22"></td>
          <td id="file-stateful_widget-dart-LC22" class="blob-code blob-code-inner js-file-line">      ),</td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L23" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="23"></td>
          <td id="file-stateful_widget-dart-LC23" class="blob-code blob-code-inner js-file-line">      body<span class="pl-k">:</span> <span class="pl-c1">Container</span>(),</td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L24" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="24"></td>
          <td id="file-stateful_widget-dart-LC24" class="blob-code blob-code-inner js-file-line">    );</td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L25" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="25"></td>
          <td id="file-stateful_widget-dart-LC25" class="blob-code blob-code-inner js-file-line">  }</td>
        </tr>
        <tr>
          <td id="file-stateful_widget-dart-L26" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="26"></td>
          <td id="file-stateful_widget-dart-LC26" class="blob-code blob-code-inner js-file-line">}</td>
        </tr>
  </tbody></table>
</div>


    </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/SachinKasaraddi/a3cdb1d065bdf4c69dc3cb16dfcd4456/raw/bc725d1edb8b6399527e9bd6f2a5b5b8dc084dfb/stateful_widget.dart" style="float:right">view raw</a>
        <a href="https://gist.github.com/SachinKasaraddi/a3cdb1d065bdf4c69dc3cb16dfcd4456#file-stateful_widget-dart">
          stateful_widget.dart
        </a>
        hosted with ❤ by <a href="https://github.com/">GitHub</a>
      </div>
    </div>
</div>
<p>This is simple stateful widget with empty container. But in <em>initState()</em> event is added to eventSink. Since Bloc is already listening to eventStream, network call is triggered and in return Bloc is ready with response. Now we need to consume that response and show in Widget. For that see the below gist.</p><script type="application/javascript" src="./Flutter_ BLoC pattern using Stream _ Sachin Kasaraddi_files/0f94f6bc61ac54e6d3c06447c25cb900.js.téléchargement"></script><link rel="stylesheet" href="./Flutter_ BLoC pattern using Stream _ Sachin Kasaraddi_files/gist-embed-5687a589e344.css"><div id="gist109488609" class="gist">
    <div class="gist-file" translate="no">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-crypto_list-dart" class="file my-2">
    
    <div itemprop="text" class="Box-body p-0 blob-wrapper data type-dart  ">

        
<div class="js-check-bidi js-blob-code-container blob-code-content">

  <template class="js-file-alert-template"></template>
<template class="js-line-alert-template"></template>

  <table class="highlight tab-size js-file-line-container js-code-nav-container js-tagsearch-file" data-tab-size="8" data-paste-markdown-skip="" data-tagsearch-lang="Dart" data-tagsearch-path="crypto_list.dart">
        <tbody><tr>
          <td id="file-crypto_list-dart-L1" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="1"></td>
          <td id="file-crypto_list-dart-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">import</span> <span class="pl-s">'dart:math'</span>;</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L2" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="2"></td>
          <td id="file-crypto_list-dart-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-k">import</span> <span class="pl-s">'package:flutter/material.dart'</span>;</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L3" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="3"></td>
          <td id="file-crypto_list-dart-LC3" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L4" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="4"></td>
          <td id="file-crypto_list-dart-LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-k">class</span> <span class="pl-c1">CurrenciesList</span> <span class="pl-k">extends</span> <span class="pl-c1">StatefulWidget</span> {</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L5" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="5"></td>
          <td id="file-crypto_list-dart-LC5" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">@override</span></td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L6" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="6"></td>
          <td id="file-crypto_list-dart-LC6" class="blob-code blob-code-inner js-file-line">  <span class="pl-c1">_CurrenciesListState</span> <span class="pl-en">createState</span>() <span class="pl-k">=&gt;</span> <span class="pl-c1">_CurrenciesListState</span>();</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L7" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="7"></td>
          <td id="file-crypto_list-dart-LC7" class="blob-code blob-code-inner js-file-line">}</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L8" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="8"></td>
          <td id="file-crypto_list-dart-LC8" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L9" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="9"></td>
          <td id="file-crypto_list-dart-LC9" class="blob-code blob-code-inner js-file-line"><span class="pl-k">class</span> <span class="pl-c1">_CurrenciesListState</span> <span class="pl-k">extends</span> <span class="pl-c1">State&lt;<span class="pl-c1">CurrenciesList</span>&gt;</span> {</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L10" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="10"></td>
          <td id="file-crypto_list-dart-LC10" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">final</span> bloc <span class="pl-k">=</span> <span class="pl-c1">Bloc</span>();</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L11" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="11"></td>
          <td id="file-crypto_list-dart-LC11" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L12" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="12"></td>
          <td id="file-crypto_list-dart-LC12" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">@override</span></td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L13" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="13"></td>
          <td id="file-crypto_list-dart-LC13" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">void</span> <span class="pl-en">initState</span>() {</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L14" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="14"></td>
          <td id="file-crypto_list-dart-LC14" class="blob-code blob-code-inner js-file-line">    bloc.eventSink.<span class="pl-en">add</span>(<span class="pl-c1">Event</span>.<span class="pl-c1">FETCH</span>);</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L15" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="15"></td>
          <td id="file-crypto_list-dart-LC15" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">super</span>.<span class="pl-en">initState</span>();</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L16" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="16"></td>
          <td id="file-crypto_list-dart-LC16" class="blob-code blob-code-inner js-file-line">  }</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L17" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="17"></td>
          <td id="file-crypto_list-dart-LC17" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L18" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="18"></td>
          <td id="file-crypto_list-dart-LC18" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">@override</span></td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L19" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="19"></td>
          <td id="file-crypto_list-dart-LC19" class="blob-code blob-code-inner js-file-line">  <span class="pl-c1">Widget</span> <span class="pl-en">build</span>(<span class="pl-c1">BuildContext</span> context) {</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L20" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="20"></td>
          <td id="file-crypto_list-dart-LC20" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">return</span> <span class="pl-c1">Scaffold</span>(</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L21" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="21"></td>
          <td id="file-crypto_list-dart-LC21" class="blob-code blob-code-inner js-file-line">      appBar<span class="pl-k">:</span> <span class="pl-c1">AppBar</span>(</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L22" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="22"></td>
          <td id="file-crypto_list-dart-LC22" class="blob-code blob-code-inner js-file-line">        title<span class="pl-k">:</span> <span class="pl-c1">Text</span>(<span class="pl-s">"Crypto"</span>),</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L23" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="23"></td>
          <td id="file-crypto_list-dart-LC23" class="blob-code blob-code-inner js-file-line">      ),</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L24" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="24"></td>
          <td id="file-crypto_list-dart-LC24" class="blob-code blob-code-inner js-file-line">      body<span class="pl-k">:</span> <span class="pl-en">buildCurrenciesList</span>(),</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L25" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="25"></td>
          <td id="file-crypto_list-dart-LC25" class="blob-code blob-code-inner js-file-line">    );</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L26" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="26"></td>
          <td id="file-crypto_list-dart-LC26" class="blob-code blob-code-inner js-file-line">  }</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L27" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="27"></td>
          <td id="file-crypto_list-dart-LC27" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L28" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="28"></td>
          <td id="file-crypto_list-dart-LC28" class="blob-code blob-code-inner js-file-line">  <span class="pl-c1">Container</span> <span class="pl-en">buildCurrenciesList</span>() {</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L29" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="29"></td>
          <td id="file-crypto_list-dart-LC29" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">return</span> <span class="pl-c1">Container</span>(</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L30" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="30"></td>
          <td id="file-crypto_list-dart-LC30" class="blob-code blob-code-inner js-file-line">      child<span class="pl-k">:</span> <span class="pl-c1">StreamBuilder&lt;<span class="pl-c1">List&lt;<span class="pl-c1">String</span>&gt;&gt;</span></span>(</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L31" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="31"></td>
          <td id="file-crypto_list-dart-LC31" class="blob-code blob-code-inner js-file-line">        stream<span class="pl-k">:</span> bloc.stateStream,</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L32" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="32"></td>
          <td id="file-crypto_list-dart-LC32" class="blob-code blob-code-inner js-file-line">        builder<span class="pl-k">:</span> (context, snapshot) {</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L33" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="33"></td>
          <td id="file-crypto_list-dart-LC33" class="blob-code blob-code-inner js-file-line">          <span class="pl-k">if</span> (snapshot.hasError) {</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L34" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="34"></td>
          <td id="file-crypto_list-dart-LC34" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> <span class="pl-c1">Center</span>(child<span class="pl-k">:</span> <span class="pl-c1">Text</span>(<span class="pl-s">"<span class="pl-s">${<span class="pl-v">snapshot</span>.<span class="pl-v">error</span>}</span>"</span>));</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L35" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="35"></td>
          <td id="file-crypto_list-dart-LC35" class="blob-code blob-code-inner js-file-line">          } <span class="pl-k">else</span> <span class="pl-k">if</span> (snapshot.hasData) {</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L36" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="36"></td>
          <td id="file-crypto_list-dart-LC36" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> <span class="pl-en">_currenciesListWidget</span>(snapshot);</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L37" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="37"></td>
          <td id="file-crypto_list-dart-LC37" class="blob-code blob-code-inner js-file-line">          } <span class="pl-k">else</span> {</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L38" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="38"></td>
          <td id="file-crypto_list-dart-LC38" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> <span class="pl-c1">CircularProgressIndicator</span>();</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L39" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="39"></td>
          <td id="file-crypto_list-dart-LC39" class="blob-code blob-code-inner js-file-line">          }</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L40" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="40"></td>
          <td id="file-crypto_list-dart-LC40" class="blob-code blob-code-inner js-file-line">        },</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L41" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="41"></td>
          <td id="file-crypto_list-dart-LC41" class="blob-code blob-code-inner js-file-line">      ),</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L42" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="42"></td>
          <td id="file-crypto_list-dart-LC42" class="blob-code blob-code-inner js-file-line">    );</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L43" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="43"></td>
          <td id="file-crypto_list-dart-LC43" class="blob-code blob-code-inner js-file-line">  }</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L44" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="44"></td>
          <td id="file-crypto_list-dart-LC44" class="blob-code blob-code-inner js-file-line">
</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L45" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="45"></td>
          <td id="file-crypto_list-dart-LC45" class="blob-code blob-code-inner js-file-line">  <span class="pl-c1">Container</span> <span class="pl-en">_currenciesListWidget</span>(<span class="pl-c1">AsyncSnapshot&lt;<span class="pl-c1">List&lt;<span class="pl-c1">String</span>&gt;&gt;</span></span> snapshot) {</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L46" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="46"></td>
          <td id="file-crypto_list-dart-LC46" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">return</span> <span class="pl-c1">Container</span>(</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L47" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="47"></td>
          <td id="file-crypto_list-dart-LC47" class="blob-code blob-code-inner js-file-line">      child<span class="pl-k">:</span> <span class="pl-c1">Column</span>(</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L48" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="48"></td>
          <td id="file-crypto_list-dart-LC48" class="blob-code blob-code-inner js-file-line">        children<span class="pl-k">:</span> [</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L49" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="49"></td>
          <td id="file-crypto_list-dart-LC49" class="blob-code blob-code-inner js-file-line">          <span class="pl-k">new</span> <span class="pl-c1">Flexible</span>(</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L50" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="50"></td>
          <td id="file-crypto_list-dart-LC50" class="blob-code blob-code-inner js-file-line">            child<span class="pl-k">:</span> <span class="pl-k">new</span> <span class="pl-c1">ListView</span>.<span class="pl-en">builder</span>(</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L51" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="51"></td>
          <td id="file-crypto_list-dart-LC51" class="blob-code blob-code-inner js-file-line">              itemCount<span class="pl-k">:</span> snapshot.data<span class="pl-k">?</span>.length <span class="pl-k">??</span> <span class="pl-c1">0</span>,</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L52" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="52"></td>
          <td id="file-crypto_list-dart-LC52" class="blob-code blob-code-inner js-file-line">              itemBuilder<span class="pl-k">:</span> (<span class="pl-c1">BuildContext</span> context, <span class="pl-c1">int</span> index) {</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L53" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="53"></td>
          <td id="file-crypto_list-dart-LC53" class="blob-code blob-code-inner js-file-line">                <span class="pl-k">final</span> <span class="pl-c1">String</span> currency <span class="pl-k">=</span> snapshot.data<span class="pl-k">?</span>[index] <span class="pl-k">??</span> <span class="pl-s">""</span>;</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L54" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="54"></td>
          <td id="file-crypto_list-dart-LC54" class="blob-code blob-code-inner js-file-line">                <span class="pl-k">final</span> <span class="pl-c1">String</span> avatarText <span class="pl-k">=</span> currency.<span class="pl-en">substring</span>(<span class="pl-c1">0</span>, <span class="pl-c1">1</span>);</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L55" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="55"></td>
          <td id="file-crypto_list-dart-LC55" class="blob-code blob-code-inner js-file-line">                  <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-c1">ListTile</span>(</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L56" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="56"></td>
          <td id="file-crypto_list-dart-LC56" class="blob-code blob-code-inner js-file-line">                    leading<span class="pl-k">:</span> <span class="pl-k">new</span> <span class="pl-c1">CircleAvatar</span>(</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L57" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="57"></td>
          <td id="file-crypto_list-dart-LC57" class="blob-code blob-code-inner js-file-line">                      backgroundColor<span class="pl-k">:</span> <span class="pl-c1">Colors</span>.primaries[<span class="pl-c1">Random</span>().<span class="pl-en">nextInt</span>(<span class="pl-c1">Colors</span>.primaries.length)],</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L58" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="58"></td>
          <td id="file-crypto_list-dart-LC58" class="blob-code blob-code-inner js-file-line">                      child<span class="pl-k">:</span> <span class="pl-k">new</span> <span class="pl-c1">Text</span>(avatarText),</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L59" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="59"></td>
          <td id="file-crypto_list-dart-LC59" class="blob-code blob-code-inner js-file-line">                    ),</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L60" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="60"></td>
          <td id="file-crypto_list-dart-LC60" class="blob-code blob-code-inner js-file-line">                    title<span class="pl-k">:</span> <span class="pl-k">new</span> <span class="pl-c1">Text</span>(</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L61" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="61"></td>
          <td id="file-crypto_list-dart-LC61" class="blob-code blob-code-inner js-file-line">                      currency,</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L62" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="62"></td>
          <td id="file-crypto_list-dart-LC62" class="blob-code blob-code-inner js-file-line">                      style<span class="pl-k">:</span></td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L63" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="63"></td>
          <td id="file-crypto_list-dart-LC63" class="blob-code blob-code-inner js-file-line">                          <span class="pl-k">new</span> <span class="pl-c1">TextStyle</span>(fontWeight<span class="pl-k">:</span> <span class="pl-c1">FontWeight</span>.bold),</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L64" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="64"></td>
          <td id="file-crypto_list-dart-LC64" class="blob-code blob-code-inner js-file-line">                    ),</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L65" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="65"></td>
          <td id="file-crypto_list-dart-LC65" class="blob-code blob-code-inner js-file-line">                  );</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L66" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="66"></td>
          <td id="file-crypto_list-dart-LC66" class="blob-code blob-code-inner js-file-line">              },</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L67" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="67"></td>
          <td id="file-crypto_list-dart-LC67" class="blob-code blob-code-inner js-file-line">            ),</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L68" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="68"></td>
          <td id="file-crypto_list-dart-LC68" class="blob-code blob-code-inner js-file-line">          ),</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L69" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="69"></td>
          <td id="file-crypto_list-dart-LC69" class="blob-code blob-code-inner js-file-line">        ],</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L70" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="70"></td>
          <td id="file-crypto_list-dart-LC70" class="blob-code blob-code-inner js-file-line">      ),</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L71" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="71"></td>
          <td id="file-crypto_list-dart-LC71" class="blob-code blob-code-inner js-file-line">    );</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L72" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="72"></td>
          <td id="file-crypto_list-dart-LC72" class="blob-code blob-code-inner js-file-line">  }</td>
        </tr>
        <tr>
          <td id="file-crypto_list-dart-L73" class="blob-num js-line-number js-code-nav-line-number js-blob-rnum" data-line-number="73"></td>
          <td id="file-crypto_list-dart-LC73" class="blob-code blob-code-inner js-file-line">}</td>
        </tr>
  </tbody></table>
</div>


    </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/SachinKasaraddi/0f94f6bc61ac54e6d3c06447c25cb900/raw/66f2ae65ba7eb5f15a1dd91d913fc362ffaf24ec/crypto_list.dart" style="float:right">view raw</a>
        <a href="https://gist.github.com/SachinKasaraddi/0f94f6bc61ac54e6d3c06447c25cb900#file-crypto_list-dart">
          crypto_list.dart
        </a>
        hosted with ❤ by <a href="https://github.com/">GitHub</a>
      </div>
    </div>
</div>
<p>In the above gist please refer to <em>buildCurrenciesList</em> method which listens to <em>bloc.stateStream</em>. And widget react accordingly. If data hasError then error widget is shown. If data has value then list with currencies is shown.</p><p></p><figure><img loading="lazy" src="./Flutter_ BLoC pattern using Stream _ Sachin Kasaraddi_files/sachin_kasaraddi_crypto_app.gif"><figcaption>Crypto App</figcaption></figure>For fully completed example with pagination, error state and networking implementation please see the source here.
<a href="https://github.com/SachinKasaraddi/CryptoCurrencies">SachinKasaraddi/CryptoCurrencies</a><p></p></div><footer class="post-footer"><ul class="post-tags"><li><a href="https://sachinkasaraddi.com/tags/flutter/">Flutter</a></li><li><a href="https://sachinkasaraddi.com/tags/bloc/">BLoC</a></li><li><a href="https://sachinkasaraddi.com/tags/dart-streams/">Dart Streams</a></li></ul><div class="share-buttons"><a target="_blank" rel="noopener noreferrer" aria-label="share Flutter: BLoC pattern using Stream on twitter" href="https://twitter.com/intent/tweet/?text=Flutter%3a%20BLoC%20pattern%20using%20Stream&amp;url=https%3a%2f%2fsachinkasaraddi.com%2fposts%2fbloc-patter-using-stream%2f&amp;hashtags=Flutter%2cBLoC%2cDartStreams"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"></path></svg></a><a target="_blank" rel="noopener noreferrer" aria-label="share Flutter: BLoC pattern using Stream on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fsachinkasaraddi.com%2fposts%2fbloc-patter-using-stream%2f&amp;title=Flutter%3a%20BLoC%20pattern%20using%20Stream&amp;summary=Flutter%3a%20BLoC%20pattern%20using%20Stream&amp;source=https%3a%2f%2fsachinkasaraddi.com%2fposts%2fbloc-patter-using-stream%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"></path></svg></a><a target="_blank" rel="noopener noreferrer" aria-label="share Flutter: BLoC pattern using Stream on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fsachinkasaraddi.com%2fposts%2fbloc-patter-using-stream%2f&amp;title=Flutter%3a%20BLoC%20pattern%20using%20Stream"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"></path></svg></a><a target="_blank" rel="noopener noreferrer" aria-label="share Flutter: BLoC pattern using Stream on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fsachinkasaraddi.com%2fposts%2fbloc-patter-using-stream%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"></path></svg></a><a target="_blank" rel="noopener noreferrer" aria-label="share Flutter: BLoC pattern using Stream on whatsapp" href="https://api.whatsapp.com/send?text=Flutter%3a%20BLoC%20pattern%20using%20Stream%20-%20https%3a%2f%2fsachinkasaraddi.com%2fposts%2fbloc-patter-using-stream%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"></path></svg></a><a target="_blank" rel="noopener noreferrer" aria-label="share Flutter: BLoC pattern using Stream on telegram" href="https://telegram.me/share/url?text=Flutter%3a%20BLoC%20pattern%20using%20Stream&amp;url=https%3a%2f%2fsachinkasaraddi.com%2fposts%2fbloc-patter-using-stream%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"></path></svg></a></div></footer></article></main><footer class="footer"><span>© 2021 <a href="https://sachinkasaraddi.com/">Sachin Kasaraddi</a></span>
<span>·</span>
<span>Powered by <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a></span>
<span>·</span>
<span>Theme <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a></span></footer><a href="https://sachinkasaraddi.com/posts/bloc-patter-using-stream/#top" aria-label="go to top" title="Go to Top (Alt + G)"><button class="top-link" id="top-link" type="button" accesskey="g" style="visibility: hidden; opacity: 0;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"></path></svg></button></a>
<script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position"))};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft)}document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script><script>document.querySelectorAll('pre > code').forEach(b=>{const d=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function c(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),c();return}const a=document.createRange();a.selectNodeContents(b);const d=window.getSelection();d.removeAllRanges(),d.addRange(a);try{document.execCommand('copy'),c()}catch(a){}d.removeRange(a)}),d.appendChild(a)})</script></body><loom-container id="lo-engage-ext-container"><loom-shadow classname="resolved"></loom-shadow></loom-container><loom-container id="lo-companion-container"><loom-shadow classname="resolved"></loom-shadow></loom-container></html>